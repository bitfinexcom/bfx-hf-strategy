<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Order Creation - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-Architectural Overview.html">Architectural Overview</a></li><li class="nav-item"><a href="tutorial-Backtesting Offline.html">Backtesting Offline</a></li><li class="nav-item"><a href="tutorial-Backtesting Online.html">Backtesting Online</a></li><li class="nav-item"><a href="tutorial-Live Execution.html">Live Execution</a></li><li class="nav-item"><a href="tutorial-Order Creation.html">Order Creation</a></li><li class="nav-item"><a href="tutorial-Plugin System.html">Plugin System</a></li><li class="nav-item"><a href="tutorial-Strategy Design.html">Strategy Design</a></li><li class="nav-item"><a href="tutorial-Using Indicators.html">Using Indicators</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Helpers.html">Helpers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.closeOpenPositions">closeOpenPositions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.closePosition">closePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.closePositionLimit">closePositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.closePositionMarket">closePositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.closePositionWithOrder">closePositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.condition">condition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.conditionInAPosition">conditionInAPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.conditionIndicatorCrossed">conditionIndicatorCrossed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.conditionIndicatorsCrossed">conditionIndicatorsCrossed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.enforceMinTradeInterval">enforceMinTradeInterval</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.getLastPrice">getLastPrice</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.getState">getState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.inALongPosition">inALongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.inAPosition">inAPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.inAShortPosition">inAShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.indicators">indicators</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.indicatorValues">indicatorValues</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.minTradeIntervalMet">minTradeIntervalMet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openLongPosition">openLongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openLongPositionLimit">openLongPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openLongPositionMarket">openLongPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openPosition">openPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openPositionLimit">openPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openPositionMarket">openPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openPositionWithOrder">openPositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openShortPosition">openShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openShortPositionLimit">openShortPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.openShortPositionMarket">openShortPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.trades">trades</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateLongPosition">updateLongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateLongPositionLimit">updateLongPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateLongPositionLimit">updateLongPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateLongPositionMarket">updateLongPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updatePosition">updatePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updatePositionMarket">updatePositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updatePositionWithOrder">updatePositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateShortPosition">updateShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateShortPositionLimit">updateShortPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.updateShortPositionLimit">updateShortPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.withNoPosition">withNoPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.withPosition">withPosition</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#defineStrategy">defineStrategy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#execOffline">execOffline</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#execOnline">execOnline</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Order Creation</h1>
    

    <section>

<header>
    
</header>

<article>
    <h4>Overview</h4>
<p>Orders are submitted through the official <a href="https://github.com/bitfinexcom/bitfinex-api-node">bitfinex-api-node</a> Bitfinex Node.JS library, and as such can be defined using the <code>Order</code> model included with <a href="https://github.com/bitfinexcom/bfx-api-node-models">bfx-api-node-mode </a>. This removes the need to construct a new order packet for the WSv2 API, and validates parameters automatically.</p>
<p>Order types are available on the <code>Order.type</code> map:</p>
<ul>
<li><code>Order.type.LIMIT</code></li>
<li><code>Order.type.MARKET</code></li>
<li><code>Order.type.STOP</code></li>
<li><code>Order.type.STOP_LIMIT</code></li>
<li><code>Order.type.TRAILING_STOP</code></li>
<li><code>Order.type.FOK</code> - fill or kill</li>
<li><code>Order.type.IOC</code> - immediate or cancel</li>
</ul>
<p>The types above all trade on margin; for their exchange counterparts prefix the type with <code>EXCHANGE_</code>, as in <code>Order.type.EXCHANGE_LIMIT</code>.</p>
<h4>Symbols</h4>
<p>Symbols must be prefixed with <code>t</code> (i.e. <code>'tLEOUSD'</code>) for standard markets and <code>f</code> (i.e. <code>'fUSD'</code>) for funding markets. To help prevent errors, all symbols are available on the <a href="https://github.com/bitfinexcom/bfx-hf-util">bfx-hf-util</a> utility library under the <code>SYMBOLS</code> export, with base and quote currencies seperated by an underscore. For example, <code>'tLEUSD'</code> becomes <code>SYMBOLS.LEO_USD</code>.</p>
<h4>Creating an Order</h4>
<p>To create a new order, use the <code>Order</code> constructor and pass the required parameters:</p>
<pre class="prettyprint source lang-js"><code>const { Order } = require('bfx-ap-node-models')
const { SYMBOLS } = require('bfx-hf-util')

const o = new Order({
  type: Order.type.STOP_LIMIT, // margin order
  symbol: SYMBOLS.LEO_USD,
  price: 0.75, // price is converted to a decimal string automatically
  priceAuxLimit: 0.82, // stop price
  amount: 6,
  hidden: true,   // makes the order invisible to other users
  postonly: true  // ensure the order is inserted into the book
})
</code></pre>
<h4>Submitting an Order</h4>
<p>The order created above can be passed to any one of the position manipulation helper methods, listed below:</p>
<ul>
<li><code>openLongPositionMarket(params = {})</code></li>
<li><code>openLongPositionLimit(params = {})</code></li>
<li><code>openLongPosition(params = {})</code></li>
<li><code>openShortPositionMarket(params = {})</code></li>
<li><code>openShortPositionLimit(params = {})</code></li>
<li><code>openShortPosition(params = {})</code></li>
<li><code>openPosition(params = {})</code></li>
<li><code>updateLongPositionMarket(params = {})</code></li>
<li><code>updateLongPositionLimit(params = {})</code></li>
<li><code>updateLongPosition(params = {})</code></li>
<li><code>updateShortPositionMarket(params = {})</code></li>
<li><code>updateShortPositionLimit(params = {})</code></li>
<li><code>updateShortPosition(params = {})</code></li>
<li><code>updatePosition(params = {})</code></li>
<li><code>closePositionMarket(params = {})</code></li>
<li><code>closePositionLimit(params = {})</code></li>
<li><code>closePosition(params = {})</code></li>
</ul>
<p>All of the methods listed above return promises, which resolve on order confirmation. Taken together, within a strategy this might look like:</p>
<pre class="prettyprint source lang-js"><code>const HFS = require('bfx-hf-strategy')
const { SYMBOLS } = require('bfx-hf-util')

const strategy = HFS.define({
  // ...
  exec: async function () {
    // strategy logic...

    // Submit an order via a position method. Making this call twice in a row
    // will result in an error, as the openPosition() helper fails if a position
    // is already open.
    await this.openPosition(new Order({
      type: Order.type.STOP_LIMIT, // margin order
      symbol: SYMBOLS.LEO_USD,
      price: 0.75, // price is converted to a decimal string automatically
      priceAuxLimit: 0.82, // stop price
      amount: 6,
      hidden: true,   // makes the order invisible to other users
      postonly: true  // ensure the order is inserted into the book
    }))

    // At this point the order has been confirmed. One may save the returned
    // promise and continue execution immediately to prevent delays in logic
    // processing, but it is recommended to listen for a resolve/reject in order
    // to handle rejected Orders.
  }
})
</code></pre>
<h4>Alternative Parameter Formats</h4>
<p>The methods listed above all take either an <code>Order</code> model instance, a Bitfinex WSv2 array-format order, or a plain JS object holding parameters which are then passed to a new <code>Order</code> instance internally.</p>
</article>

</section>

</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Wed May 06 2020 01:53:37 GMT+0700 (Indochina Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>