<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Order Creation - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-Architectural Overview.html">Architectural Overview</a></li><li class="nav-item"><a href="tutorial-Backtesting Offline.html">Backtesting Offline</a></li><li class="nav-item"><a href="tutorial-Backtesting Online.html">Backtesting Online</a></li><li class="nav-item"><a href="tutorial-Live Execution.html">Live Execution</a></li><li class="nav-item"><a href="tutorial-Order Creation.html">Order Creation</a></li><li class="nav-item"><a href="tutorial-Strategy Design.html">Strategy Design</a></li><li class="nav-item"><a href="tutorial-Using Indicators.html">Using Indicators</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Backtest.html">Backtest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Backtest.html#.debugResults">debugResults</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Backtest.html#.execOffline">execOffline</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Backtest.html#.execOnline">execOnline</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Helpers.html">Helpers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.closeOpenPositions">h.closeOpenPositions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.closePosition">h.closePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.closePositionLimit">h.closePositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.closePositionMarket">h.closePositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.closePositionWithOrder">h.closePositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.condition">h.condition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.condition.inAPosition">h.condition.inAPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.condition.indicatorCrossed">h.condition.indicatorCrossed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.condition.indicatorsCrossed">h.condition.indicatorsCrossed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.enforceMinTradeInterval">h.enforceMinTradeInterval</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.getLastPrice">h.getLastPrice</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.getState">h.getState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.inALongPosition">h.inALongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.inAPosition">h.inAPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.inAShortPosition">h.inAShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.indicatorValues">h.indicatorValues</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.minTradeIntervalMet">h.minTradeIntervalMet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openLongPosition">h.openLongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openLongPositionLimit">h.openLongPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openLongPositionMarket">h.openLongPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openPosition">h.openPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openPositionLimit">h.openPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openPositionMarket">h.openPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openPositionWithOrder">h.openPositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openShortPosition">h.openShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openShortPositionLimit">h.openShortPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.openShortPositionMarket">h.openShortPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateLongPosition">h.updateLongPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateLongPositionLimit">h.updateLongPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateLongPositionMarket">h.updateLongPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updatePosition">h.updatePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updatePositionLimit">h.updatePositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updatePositionMarket">h.updatePositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updatePositionWithOrder">h.updatePositionWithOrder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateShortPosition">h.updateShortPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateShortPositionLimit">h.updateShortPositionLimit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.updateShortPositionMarket">h.updateShortPositionMarket</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.withNoPosition">h.withNoPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Helpers.html#.h.withPosition">h.withPosition</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#defineStrategy">defineStrategy</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Order Creation</h1>
    

    <section>

<header>
    
</header>

<article>
    <h4>Overview</h4>
<p>Orders are submitted through the official <a href="https://github.com/bitfinexcom/bitfinex-api-node">bitfinex-api-node</a> Bitfinex Node.JS library, and as such can be defined using the <code>Order</code> model included with <a href="https://github.com/bitfinexcom/bfx-api-node-models">bfx-api-node-mode </a>. This removes the need to construct a new order packet for the WSv2 API, and validates parameters automatically.</p>
<p>Order types are available on the <code>Order.type</code> map:</p>
<ul>
<li><code>Order.type.LIMIT</code></li>
<li><code>Order.type.MARKET</code></li>
<li><code>Order.type.STOP</code></li>
<li><code>Order.type.STOP_LIMIT</code></li>
<li><code>Order.type.TRAILING_STOP</code></li>
<li><code>Order.type.FOK</code> - fill or kill</li>
<li><code>Order.type.IOC</code> - immediate or cancel</li>
</ul>
<p>The types above all trade on margin; for their exchange counterparts prefix the type with <code>EXCHANGE_</code>, as in <code>Order.type.EXCHANGE_LIMIT</code>.</p>
<h4>Symbols</h4>
<p>Symbols must be prefixed with <code>t</code> (i.e. <code>'tLEOUSD'</code>) for standard markets and <code>f</code> (i.e. <code>'fUSD'</code>) for funding markets. To help prevent errors, all symbols are available on the <a href="https://github.com/bitfinexcom/bfx-hf-util">bfx-hf-util</a> utility library under the <code>SYMBOLS</code> export, with base and quote currencies seperated by an underscore. For example, <code>'tLEUSD'</code> becomes <code>SYMBOLS.LEO_USD</code>.</p>
<h4>Creating an Order</h4>
<p>To create a new order, use the <code>Order</code> constructor and pass the required parameters:</p>
<pre class="prettyprint source lang-js"><code>const { Order } = require('bfx-ap-node-models')
const { SYMBOLS } = require('bfx-hf-util')

const o = new Order({
  type: Order.type.STOP_LIMIT, // margin order
  symbol: SYMBOLS.LEO_USD,
  price: 0.75, // price is converted to a decimal string automatically
  priceAuxLimit: 0.82, // stop price
  amount: 6,
  hidden: true,   // makes the order invisible to other users
  postonly: true  // ensure the order is inserted into the book
})
</code></pre>
<h4>Submitting an Order</h4>
<p>The order created above can be passed to any one of the position manipulation helper methods, listed below:</p>
<ul>
<li><a href="module-Helpers.html#.h.openLongPositionMarket"><code>openLongPositionMarket(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openLongPositionLimit"><code>openLongPositionLimit(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openLongPosition"><code>openLongPosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openShortPositionMarket"><code>openShortPositionMarket(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openShortPositionLimit"><code>openShortPositionLimit(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openShortPosition"><code>openShortPosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.openPosition"><code>openPosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateLongPositionMarket"><code>updateLongPositionMarket(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateLongPositionLimit"><code>updateLongPositionLimit(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateLongPosition"><code>updateLongPosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateShortPositionMarket"><code>updateShortPositionMarket(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateShortPositionLimit"><code>updateShortPositionLimit(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updateShortPosition"><code>updateShortPosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.updatePosition"><code>updatePosition(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.closePositionMarket"><code>closePositionMarket(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.closePositionLimit"><code>closePositionLimit(params = {})</code></a></li>
<li><a href="module-Helpers.html#.h.closePosition"><code>closePosition(params = {})</code></a></li>
</ul>
<p>All of the methods listed above return promises, which resolve on order confirmation. Taken together, within a strategy this might look like:</p>
<pre class="prettyprint source lang-js"><code>const HFS = require('bfx-hf-strategy')
const { SYMBOLS } = require('bfx-hf-util')

const strategy = HFS.define({
  // ...
  exec: async function () {
    // strategy logic...

    // Submit an order via a position method. Making this call twice in a row
    // will result in an error, as the openPosition() helper fails if a position
    // is already open.
    await this.openPosition(new Order({
      type: Order.type.STOP_LIMIT, // margin order
      symbol: SYMBOLS.LEO_USD,
      price: 0.75, // price is converted to a decimal string automatically
      priceAuxLimit: 0.82, // stop price
      amount: 6,
      hidden: true,   // makes the order invisible to other users
      postonly: true  // ensure the order is inserted into the book
    }))

    // At this point the order has been confirmed. One may save the returned
    // promise and continue execution immediately to prevent delays in logic
    // processing, but it is recommended to listen for a resolve/reject in order
    // to handle rejected Orders.
  }
})
</code></pre>
<h4>Alternative Parameter Formats</h4>
<p>The methods listed above all take either an <code>Order</code> model instance, a Bitfinex WSv2 array-format order, or a plain JS object holding parameters which are then passed to a new <code>Order</code> instance internally.</p>
</article>

</section>

</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sat Mar 14 2020 21:59:47 GMT+0700 (Indochina Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>